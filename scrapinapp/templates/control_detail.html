{% extends "base.html" %}
{% block title %}Control: {{ control.short_name }}{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 py-8">
  <div class="bg-white shadow-md rounded-lg p-6">
    <h1 class="text-2xl font-bold text-blue-700 mb-4">{{ control.short_name }}</h1>
    <p class="text-gray-600 mb-6">{{ control.description|default:"No description available." }}</p>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <p><span class="font-semibold text-gray-700">Control Type:</span>
          {{ control.control_type|default:"N/A" }}
        </p>
        <p><span class="font-semibold text-gray-700">Control Objective:</span>
          {{ control.control_objective|default:"N/A" }}
        </p>
        <p><span class="font-semibold text-gray-700">Category:</span>
          {{ control.category|default:"N/A" }}
        </p>
      </div>
      <div>
        <p><span class="font-semibold text-gray-700">Implementation Status:</span>
          {{ control.implementation_status|default:"N/A" }}
        </p>
        <p><span class="font-semibold text-gray-700">Owner:</span>
          {{ control.owner|default:"N/A" }}
        </p>
        <p><span class="font-semibold text-gray-700">Created At:</span>
          {{ control.created_at|date:"M d, Y H:i" }}
        </p>
      </div>
    </div>

    {% if control.policies.all %}
    <div class="mt-8">
      <h2 class="text-xl font-semibold text-gray-800 mb-2">Linked Policies</h2>
      <ul class="list-disc pl-6 text-gray-700">
        {% for policy in control.policies.all %}
        <li>{{ policy.title }} ({{ policy.policy_id }})</li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}

    {% if control.clauses.all %}
    <div class="mt-8">
      <h2 class="text-xl font-semibold text-gray-800 mb-2">Linked Clauses</h2>
      <ul class="list-disc pl-6 text-gray-700">
        {% for clause in control.clauses.all %}
        <li>{{ clause.display_identifier }} â€“ {{ clause.title|default:"No title" }}</li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}
